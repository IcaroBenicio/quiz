<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quiz Avan√ßado ‚Äî Geografia</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Pequenos ajustes visuais adicionais */
    .option-btn { transition: transform .12s ease, box-shadow .12s ease, background-color .12s ease; }
    .option-btn:active { transform: scale(.98); }
    .progress-bar-inner { transition: width .45s cubic-bezier(.2,.9,.2,1); }
    .timer-bar { transition: width 1s linear; background: linear-gradient(90deg,#ffb86b,#ff6b9a); }
    .fade-in { animation: fadeIn .35s ease both; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(6px);} to { opacity: 1; transform: translateY(0);} }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-sky-50 to-amber-50 font-sans">

  <!-- Container central -->
  <div class="max-w-2xl mx-auto p-6">

    <!-- START SCREEN -->
    <section id="startScreen" class="bg-white rounded-xl shadow-lg p-8 text-center">
      <h1 class="text-3xl font-bold text-sky-700 mb-2">Quiz Avan√ßado de Geografia</h1>
      <p class="text-gray-600 mb-6">Teste seus conhecimentos ‚Äî perguntas aleat√≥rias, tempo por pergunta e ranking local.</p>

      <div class="flex flex-col sm:flex-row items-center justify-center gap-3">
        <label class="flex items-center gap-2 text-sm text-gray-700">
          <span>Tempo por pergunta</span>
          <select id="timePerQuestion" class="ml-2 rounded border px-2 py-1">
            <option value="15">15 s</option>
            <option value="20000" selected>20000 s</option>
            <option value="30">30 s</option>
          </select>
        </label>

        <button id="startBtn" class="mt-4 sm:mt-0 px-6 py-3 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition">
          Iniciar Quiz
        </button>

        <button id="resumeBtn" class="mt-4 sm:mt-0 px-4 py-2 bg-amber-400 text-white rounded-lg hover:bg-amber-500 transition hidden">
          Retomar
        </button>

        <button id="viewRankingBtn" class="mt-4 sm:mt-0 px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition">
          Ver Ranking
        </button>
      </div>
      <p class="text-xs text-gray-400 mt-4">O progresso √© salvo localmente no seu navegador.</p>
    </section>

    <!-- QUIZ CARD -->
    <section id="quizCard" class="hidden mt-6 bg-white rounded-xl shadow-lg p-6 fade-in">
      <!-- topo: t√≠tulo + progress -->
      <div class="mb-4">
        <div class="flex items-center justify-between mb-2">
          <h2 id="cardTitle" class="text-xl font-semibold text-sky-700">Pergunta</h2>
          <div class="text-sm text-gray-600" id="progressText" aria-live="polite">Quest√£o 1 de 5 (0%)</div>
        </div>

        <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
          <div id="progressBar" class="h-3 progress-bar-inner bg-gradient-to-r from-sky-500 to-rose-400 rounded-full" style="width:0%"></div>
        </div>
      </div>

      <!-- Temporizador visual -->
      <div class="relative h-2 bg-gray-100 rounded-full overflow-hidden my-3">
        <div id="timerBar" class="timer-bar absolute left-0 top-0 h-full" style="width:100%"></div>
      </div>
      <div class="flex items-center justify-between text-sm text-gray-500 mb-4">
        <div id="timerText">Tempo: 20s</div>
        <div id="scoreMini">Acertos: 0</div>
      </div>

      <!-- Pergunta & op√ß√µes -->
      <div id="questionBox" class="mb-4">
        <p id="questionText" class="text-lg text-gray-800 font-medium">Pergunta aparece aqui</p>
      </div>

      <div id="options" class="grid gap-3"></div>

      <!-- a√ß√£o -->
      <div class="flex items-center justify-between mt-6">
        <button id="skipBtn" class="px-4 py-2 rounded-md border border-gray-200 text-gray-700 hover:bg-gray-50">Pular</button>
        <div class="flex items-center gap-3">
          <button id="nextBtn" class="px-5 py-2 bg-sky-600 text-white rounded-md hidden">Pr√≥xima</button>
          <button id="quitBtn" class="px-4 py-2 rounded-md border border-red-100 text-red-600 hover:bg-red-50">Sair</button>
        </div>
      </div>
    </section>

    <!-- RESULT SCREEN -->
    <section id="resultCard" class="hidden mt-6 bg-white rounded-xl shadow-lg p-6 text-center">
      <h3 id="resultTitle" class="text-2xl font-bold text-sky-700">Resultado</h3>
      <p id="resultMsg" class="mt-2 text-gray-700"></p>
      <p class="mt-2 text-lg">Pontua√ß√£o: <strong id="finalScore">0</strong> / <span id="totalQ">0</span></p>

      <div id="wrongList" class="mt-4 text-left"></div>

      <div class="mt-6 flex flex-col sm:flex-row gap-3 items-center justify-center">
        <button id="shareBtn" class="px-4 py-2 bg-indigo-500 text-white rounded-md hover:bg-indigo-600">Compartilhar</button>
        <button id="tryAgainBtn" class="px-4 py-2 bg-emerald-500 text-white rounded-md hover:bg-emerald-600">Jogar de novo</button>
        <button id="backHomeBtn" class="px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-100">Voltar</button>
      </div>
    </section>

    <!-- RANKING modal simples -->
    <section id="rankingCard" class="hidden mt-6 bg-white rounded-xl shadow-lg p-6">
      <h3 class="text-xl font-semibold text-sky-700">Ranking (√∫ltimas pontua√ß√µes)</h3>
      <ul id="rankingList" class="mt-4 text-gray-700"></ul>
      <div class="mt-4 flex gap-3">
        <button id="clearRankingBtn" class="px-3 py-2 bg-red-400 text-white rounded-md hover:bg-red-500">Limpar hist√≥rico</button>
        <button id="closeRankingBtn" class="px-3 py-2 bg-gray-200 rounded-md hover:bg-gray-100">Fechar</button>
      </div>
    </section>

  </div>

  <script>
  /**********************
   * Configura√ß√µes / dados
   **********************/
  const STORAGE_KEY = 'quiz_state_v1';
  const HISTORY_KEY = 'quiz_history_v1';

  // perguntas originais (pode ampliar)
  const ALL_QUESTIONS = [
       {
      "text": "Em qual alternativa o verbo est√° na voz passiva anal√≠tica?",
      "options": [
        "O atleta feriu-se durante o treino.",
        "O projeto foi aprovado pela comiss√£o.",
        "Reformam-se apartamentos antigos.",
        "O governo resolveu o problema rapidamente."
      ],
      "correct": 1
    },
    {
      "text": "Ao transformar a frase 'O aluno fez a tarefa.' para a voz passiva sint√©tica, a forma correta √©:",
      "options": [
        "A tarefa foi feita pelo aluno.",
        "Fez-se a tarefa pelo aluno.",
        "Fez-se a tarefa.",
        "Fizeram-se as tarefas."
      ],
      "correct": 2
    },
    {
      "text": "O 'se' atua como √çndice de Indetermina√ß√£o do Sujeito (IIS) em qual das frases?",
      "options": [
        "Vende-se casa na praia.",
        "Trabalha-se muito neste escrit√≥rio.",
        "Resolveram-se os problemas da equipe.",
        "O r√©u entregou-se √† pol√≠cia."
      ],
      "correct": 1
    },
    {
      "text": "Qual a voz do verbo em 'Os vizinhos cumprimentaram-se calorosamente na rua'?",
      "options": [
        "Voz ativa",
        "Voz passiva anal√≠tica",
        "Voz reflexiva",
        "Voz reflexiva rec√≠proca"
      ],
      "correct": 3
    },
    {
      "text": "Qual a forma correta da frase 'Os alunos prepararam a festa' na voz passiva anal√≠tica?",
      "options": [
        "Preparou-se a festa pelos alunos.",
        "A festa foi preparada pelos alunos.",
        "Os alunos foram preparados para a festa.",
        "Prepara-se a festa."
      ],
      "correct": 1
    },
    {
      "text": "A voz do verbo em 'O problema parecia insol√∫vel para a equipe' √©:",
      "options": [
        "Voz ativa",
        "Voz passiva",
        "Voz reflexiva",
        "Voz indeterminada"
      ],
      "correct": 0
    },
    {
      "text": "Qual √© a classifica√ß√£o da voz verbal na frase 'Os candidatos submeteram-se ao exame rigoroso'?",
      "options": [
        "Voz ativa com objeto direto reflexivo",
        "Voz passiva sint√©tica",
        "Voz reflexiva",
        "Voz passiva anal√≠tica"
      ],
      "correct": 2
    },
    {
      "text": "Qual a principal caracter√≠stica do Discurso Indireto Livre?",
      "options": [
        "Uso de aspas e travess√£o para marcar a fala do personagem.",
        "A fala do personagem √© reproduzida pelo narrador, sem mistura de vozes.",
        "Mistura da voz do narrador e do personagem, sem o uso de verbos de elocu√ß√£o expl√≠citos ou pontua√ß√£o marcante.",
        "O narrador apenas relata os fatos, sem incluir pensamentos do personagem."
      ],
      "correct": 2
    },
    {
      "text": "Ao transformar a frase em Discurso Indireto: 'O funcion√°rio perguntou: 'Posso sair mais cedo hoje?'', a forma correta √©:",
      "options": [
        "O funcion√°rio perguntou se podia sair mais cedo hoje.",
        "O funcion√°rio perguntou que se podia sair mais cedo naquele dia.",
        "O funcion√°rio perguntou se podia sair mais cedo naquele dia.",
        "O funcion√°rio perguntou se eu poderia sair mais cedo naquele dia."
      ],
      "correct": 2
    },
    {
      "text": "Identifique a √∫nica frase que est√° em Discurso Direto.",
      "options": [
        "O orador explicou que a crise econ√¥mica era passageira.",
        "O orador: a crise econ√¥mica era passageira. (pensou a plateia)",
        "O orador afirmou: 'A crise econ√¥mica √© passageira.'",
        "A crise econ√¥mica, sim, passageira, disse o orador para os presentes."
      ],
      "correct": 2
    },
    {
      "text": "Na passagem para o Discurso Indireto, o Futuro do Presente ('Eu viajarei amanh√£.') se transforma em:",
      "options": [
        "Presente do Indicativo",
        "Futuro do Pret√©rito",
        "Pret√©rito Perfeito",
        "Pret√©rito Mais-que-perfeito"
      ],
      "correct": 1
    },
    {
      "text": "A frase 'Ele n√£o aguentava mais! Tinha que sair daquele lugar.' (pensamento do personagem inserido na narrativa sem pontua√ß√£o de di√°logo) √© um exemplo de:",
      "options": [
        "Discurso Indireto Simples",
        "Discurso Direto",
        "Cita√ß√£o direta",
        "Discurso Indireto Livre"
      ],
      "correct": 3
    },
    {
      "text": "Qual dos verbos de elocu√ß√£o (ou dicendi) seria mais adequado para introduzir uma d√∫vida no Discurso Indireto?",
      "options": [
        "Afirmar",
        "Gritar",
        "Indagar",
        "Sussurrar"
      ],
      "correct": 2
    },
    {
      "text": "Ao converter a ordem 'O professor disse: 'Fa√ßam o exerc√≠cio agora!'' para o Discurso Indireto, qual a forma correta?",
      "options": [
        "O professor disse para os alunos que fizessem o exerc√≠cio agora.",
        "O professor ordenou que eles fizessem o exerc√≠cio naquele momento.",
        "O professor disse que eles far√£o o exerc√≠cio agora.",
        "O professor perguntou se eles fariam o exerc√≠cio naquele momento."
      ],
      "correct": 1
    },
    {
      "text": "O que a Progress√£o com T√≥pico Constante (ou Linear) realiza em um par√°grafo?",
      "options": [
        "O rema de uma ora√ß√£o se torna o tema da ora√ß√£o seguinte.",
        "Repeti√ß√£o da mesma informa√ß√£o sem adicionar nada novo.",
        "O mesmo tema √© mantido, mas a cada ora√ß√£o uma nova informa√ß√£o (rema) √© adicionada sobre ele.",
        "A apresenta√ß√£o de uma ideia principal no final do par√°grafo."
      ],
      "correct": 2
    },
    {
      "text": "Qual a principal fun√ß√£o dos elementos de *coes√£o referencial* em um texto?",
      "options": [
        "Estabelecer a rela√ß√£o de sentido l√≥gico (causa, consequ√™ncia, oposi√ß√£o) entre as frases.",
        "Ligar as ora√ß√µes atrav√©s de conjun√ß√µes e adv√©rbios conectivos.",
        "Evitar repeti√ß√µes desnecess√°rias, retomando termos j√° citados atrav√©s de pronomes, sin√¥nimos ou elipses.",
        "Garantir que as ideias apresentadas n√£o sejam contradit√≥rias e mantenham a l√≥gica."
      ],
      "correct": 2
    },
    {
      "text": "A aus√™ncia de Progress√£o Textual, onde um texto repete a mesma ideia de forma circular sem introduzir informa√ß√µes novas, √© um problema de:",
      "options": [
        "Incoer√™ncia",
        "Coes√£o sequencial",
        "Circularidade ou T√≥pico Nulo",
        "Vagueza"
      ],
      "correct": 2
    },
    {
      "text": "Qual conectivo √© essencial para estabelecer uma *rela√ß√£o de causa* na coes√£o sequencial?",
      "options": [
        "Portanto",
        "Contudo",
        "Visto que",
        "Embora"
      ],
      "correct": 2
    },
    {
      "text": "Em 'Jo√£o gosta de Hist√≥ria. Esta disciplina √© fundamental para a cidadania.', o termo 'Esta disciplina' √© um mecanismo de coes√£o que retoma 'Hist√≥ria'. Que tipo de coes√£o √© essa?",
      "options": [
        "Coes√£o sequencial",
        "Coes√£o referencial por substitui√ß√£o",
        "Coes√£o por elipse",
        "Coes√£o por repeti√ß√£o"
      ],
      "correct": 1
    },
    {
      "text": "Qual a rela√ß√£o entre coer√™ncia e progress√£o textual?",
      "options": [
        "Coer√™ncia √© a progress√£o textual em textos narrativos; a coes√£o √© em textos dissertativos.",
        "A coer√™ncia se relaciona apenas √† gram√°tica do texto, enquanto a progress√£o se refere ao sentido.",
        "A coer√™ncia √© uma condi√ß√£o para a progress√£o; um texto incoerente n√£o pode progredir de forma l√≥gica.",
        "S√£o termos sin√¥nimos, ambos se referindo √† organiza√ß√£o das ora√ß√µes no par√°grafo."
      ],
      "correct": 2
    },
    {
      "text": "A Progress√£o com T√≥picos Derivados (ou em cadeia) √© mais adequada para qual objetivo textual?",
      "options": [
        "Desenvolver a ideia central de um par√°grafo por meio de detalhes sucessivos.",
        "Apresentar uma lista de fatos ou argumentos de forma desordenada.",
        "Explicar um processo, uma sequ√™ncia cronol√≥gica de eventos ou uma defini√ß√£o que se desdobra.",
        "Mudar radicalmente o tema do texto, introduzindo um novo par√°grafo."
      ],
      "correct": 2
    },
    {
      "text": "Qual adjetivo foi derivado de um substantivo?",
      "options": [
        "Compreens√≠vel",
        "Limp√°vel",
        "Maternal",
        "Vidente"
      ],
      "correct": 2
    },
    {
      "text": "O adjetivo 'perigoso' foi derivado de qual palavra primitiva e qual classe gramatical?",
      "options": [
        "Perigo (Substantivo)",
        "Perigar (Verbo)",
        "Perigavelmente (Adv√©rbio)",
        "Perigo (Adjetivo Primitivo)"
      ],
      "correct": 0
    },
    {
      "text": "Qual adjetivo foi derivado do verbo 'falar' e expressa a qualidade de algo que pode ser falado?",
      "options": [
        "Falat√≥rio",
        "Falange",
        "Infal√≠vel",
        "Fal√°vel"
      ],
      "correct": 3
    },
    {
      "text": "A palavra 'incerteza' foi formada a partir do adjetivo 'certo'. Qual classe gramatical do derivado 'incerteza'?",
      "options": [
        "Adv√©rbio",
        "Verbo",
        "Substantivo Abstrato",
        "Adjetivo"
      ],
      "correct": 2
    },
    {
      "text": "Qual dos adjetivos abaixo √© um adjetivo p√°trio (ou gent√≠lico) derivado?",
      "options": [
        "Milenar",
        "Americano",
        "Fraternal",
        "Amarelado"
      ],
      "correct": 1
    },
    {
      "text": "O adjetivo 'desleal' √© formado a partir do adjetivo 'leal' pelo processo de:",
      "options": [
        "Deriva√ß√£o Sufixal",
        "Composi√ß√£o por Justaposi√ß√£o",
        "Deriva√ß√£o Prefixal",
        "Deriva√ß√£o Parassint√©tica"
      ],
      "correct": 2
    },
    {
      "text": "Qual dos adjetivos compostos a seguir mant√©m invari√°vel o segundo elemento?",
      "options": [
        "Olhos verde-escuros",
        "Camisas azul-celeste",
        "M√≥veis castanho-claros",
        "Ternos cinza-claros"
      ],
      "correct": 1
    },
    {
      "text": "Um Per√≠odo Composto por Coordena√ß√£o √© caracterizado por ora√ß√µes que s√£o:",
      "options": [
        "Dependentes sintaticamente uma da outra.",
        "Sintaticamente independentes, unidas ou n√£o por uma conjun√ß√£o coordenativa.",
        "Ora√ß√µes que funcionam como termos da outra (sujeito, objeto, adjunto, etc.).",
        "Sempre separadas apenas por v√≠rgulas, sem o uso de conectivos."
      ],
      "correct": 1
    },
    {
      "text": "Qual a classifica√ß√£o da ora√ß√£o coordenada sublinhada em: 'N√£o s√≥ estudei o tema, *como tamb√©m fiz um resumo*.'?",
      "options": [
        "Coordenada Sind√©tica Alternativa",
        "Coordenada Sind√©tica Explicativa",
        "Coordenada Sind√©tica Aditiva",
        "Coordenada Sind√©tica Adversativa"
      ],
      "correct": 2
    },
    {
      "text": "O Per√≠odo Composto por Coordena√ß√£o 'Ou voc√™ me diz a verdade, ou eu saio imediatamente.' √© formado por ora√ß√µes coordenadas sind√©ticas:",
      "options": [
        "Adversativas",
        "Alternativas",
        "Conclusivas",
        "Explicativas"
      ],
      "correct": 1
    },
    {
      "text": "Qual a classifica√ß√£o correta da ora√ß√£o: 'Cumpra suas tarefas, *pois o prazo est√° acabando*.'?",
      "options": [
        "Coordenada Sind√©tica Aditiva",
        "Coordenada Sind√©tica Conclusiva",
        "Coordenada Sind√©tica Explicativa",
        "Coordenada Assind√©tica"
      ],
      "correct": 2
    },
    {
      "text": "Na frase 'Ele trabalha, estuda, l√™ bastante.', as ora√ß√µes s√£o coordenadas:",
      "options": [
        "Sind√©ticas Conclusivas",
        "Sind√©ticas Aditivas",
        "Assind√©ticas",
        "Sind√©ticas Explicativas"
      ],
      "correct": 2
    },
    {
      "text": "A conjun√ß√£o 'entretanto' pertence a qual grupo de conjun√ß√µes coordenativas?",
      "options": [
        "Aditivas",
        "Explicativas",
        "Conclusivas",
        "Adversativas"
      ],
      "correct": 3
    },
    {
      "text": "Qual das op√ß√µes abaixo cont√©m um Per√≠odo Composto por Coordena√ß√£o, e n√£o Subordina√ß√£o?",
      "options": [
        "√â fundamental que voc√™ revise a mat√©ria.",
        "Acredito que ele passar√° na prova.",
        "Quero estudar mais, mas n√£o tenho tempo.",
        "Os alunos, que estavam cansados, foram embora mais cedo."
      ],
      "correct": 2
    },
    {
      "text": "Qual o principal objetivo de se fazer uma *par√°frase* de um texto?",
      "options": [
        "Alterar a ideia original do autor para expressar uma nova opini√£o.",
        "Resumir o texto, mantendo a linguagem t√©cnica original.",
        "Reproduzir o sentido do texto original com outras palavras, geralmente para torn√°-lo mais claro ou acess√≠vel.",
        "Copiar trechos do texto original, inserindo aspas e a fonte."
      ],
      "correct": 2
    },
    {
      "text": "Par√°frase e Resumo se diferenciam principalmente em rela√ß√£o ao(√†):",
      "options": [
        "Fidelidade ao texto original, pois apenas a par√°frase exige fidelidade.",
        "Manuten√ß√£o da forma original do texto (estrutura e pontua√ß√£o).",
        "Tamanho do texto final: a par√°frase pode manter ou expandir, o resumo obrigatoriamente reduz.",
        "Uso de conectivos, que √© exclusivo da par√°frase."
      ],
      "correct": 2
    },
    {
      "text": "Qual das op√ß√µes √© a melhor par√°frase para a frase: 'A persist√™ncia √© o caminho do √™xito.'?",
      "options": [
        "O √™xito √© o resultado inevit√°vel da persist√™ncia.",
        "√â necess√°rio esfor√ßo, pois o sucesso n√£o vem facilmente.",
        "A insist√™ncia e a const√¢ncia nos conduzem ao sucesso e √† realiza√ß√£o.",
        "Somente os persistentes chegam ao final do caminho."
      ],
      "correct": 2
    },
    {
      "text": "O que a par√°frase de um texto liter√°rio *n√£o* deve fazer, em rela√ß√£o ao original?",
      "options": [
        "Tornar o texto mais simples e de f√°cil leitura.",
        "Perder a forma original do texto (m√©trica, rima, ritmo).",
        "Alterar o tom ou a emo√ß√£o central do poema ou da narrativa.",
        "Usar o vocabul√°rio do pr√≥prio autor em algumas passagens."
      ],
      "correct": 2
    },
    {
      "text": "Qual a principal aplica√ß√£o da par√°frase no contexto acad√™mico e de estudos?",
      "options": [
        "Provar que voc√™ encontrou a fonte original do texto.",
        "Demonstrar a compreens√£o de um conceito complexo, reescrevendo-o com suas pr√≥prias palavras.",
        "Reduzir o n√∫mero de p√°ginas do trabalho para atender a um limite de palavras.",
        "Adicionar coment√°rios e cr√≠ticas pessoais √† obra de outro autor."
      ],
      "correct": 1
    },
    {
      "text": "Qual √© a par√°frase mais adequada para o prov√©rbio: 'De gr√£o em gr√£o, a galinha enche o papo.'?",
      "options": [
        "A paci√™ncia √© importante, pois a galinha precisa de tempo para comer.",
        "A galinha enche seu papo comendo muitos gr√£os, um de cada vez.",
        "Os grandes objetivos s√£o alcan√ßados por meio de esfor√ßos pequenos e cont√≠nuos.",
        "O papo da galinha n√£o deve ser enchido de uma vez s√≥."
      ],
      "correct": 2
    },
    {
      "text": "A par√°frase √© um recurso importante para evitar qual problema na escrita acad√™mica?",
      "options": [
        "Erros de concord√¢ncia verbal.",
        "O uso excessivo de adjetivos derivados.",
        "A falta de progress√£o textual.",
        "O pl√°gio, ao reescrever ideias de outros autores sem copiar a forma."
      ],
      "correct": 3
    },
    {
      "text": "Em interpreta√ß√£o textual, o que se entende por *infer√™ncia*?",
      "options": [
        "A identifica√ß√£o da tese ou ideia principal do autor.",
        "A dedu√ß√£o ou conclus√£o de uma informa√ß√£o que n√£o est√° expl√≠cita, mas √© sugerida pelo texto.",
        "A reprodu√ß√£o de um trecho do texto com as mesmas palavras.",
        "A an√°lise da estrutura gramatical e do vocabul√°rio utilizado."
      ],
      "correct": 1
    },
    {
      "text": "Qual a diferen√ßa crucial entre *compreens√£o* e *interpreta√ß√£o* de texto?",
      "options": [
        "A compreens√£o √© subjetiva e a interpreta√ß√£o √© objetiva.",
        "A compreens√£o analisa o que est√° *impl√≠cito* e a interpreta√ß√£o o que est√° *expl√≠cito*.",
        "A compreens√£o foca no que est√° *escrito* (o texto em si); a interpreta√ß√£o foca no que se pode *deduzir* (a rela√ß√£o do texto com o contexto).",
        "A compreens√£o √© aplicada a textos narrativos e a interpreta√ß√£o a textos dissertativos."
      ],
      "correct": 2
    },
    {
      "text": "O que o leitor deve buscar para determinar a *intencionalidade* ou o *objetivo* de um texto?",
      "options": [
        "A fun√ß√£o sint√°tica de todos os termos gramaticais.",
        "A presen√ßa ou aus√™ncia de verbos na voz passiva.",
        "A ideia central, o tipo de linguagem e o p√∫blico-alvo a que se destina.",
        "O n√∫mero exato de ora√ß√µes coordenadas e subordinadas."
      ],
      "correct": 2
    },
    {
      "text": "Qual a fun√ß√£o da linguagem predominante em um artigo de opini√£o que busca convencer o leitor a respeito de um ponto de vista?",
      "options": [
        "Fun√ß√£o Referencial",
        "Fun√ß√£o Emotiva",
        "Fun√ß√£o Conativa (ou Apelativa)",
        "Fun√ß√£o F√°tica"
      ],
      "correct": 2
    },
    {
      "text": "Ao analisar um texto, a *ideia central* √©:",
      "options": [
        "A primeira ora√ß√£o do primeiro par√°grafo, que sempre √© o t√≥pico frasal.",
        "O tema geral, a tese ou o ponto principal sobre o qual todas as outras informa√ß√µes se articulam.",
        "Qualquer argumento que o autor utilize para sustentar sua opini√£o.",
        "Uma opini√£o do leitor sobre o assunto abordado."
      ],
      "correct": 1
    },
    {
      "text": "Qual estrat√©gia √© mais eficaz para a identifica√ß√£o do tema e das ideias centrais em um texto longo?",
      "options": [
        "Contar o n√∫mero de par√°grafos e dividir pelo n√∫mero de frases.",
        "Buscar as palavras-chave e seus sin√¥nimos que se repetem com frequ√™ncia ao longo dos par√°grafos.",
        "Prestar aten√ß√£o apenas nas conjun√ß√µes coordenativas adversativas e conclusivas.",
        "Focar apenas nas informa√ß√µes contidas nos par√™nteses e nas notas de rodap√©."
      ],
      "correct": 1
    },
    {
      "text": "Em um texto dissertativo-argumentativo, o que se espera que a *tese* do autor cumpra?",
      "options": [
        "Ser uma simples descri√ß√£o do cen√°rio apresentado.",
        "Apresentar a opini√£o do autor sobre o tema, um ponto de vista a ser defendido ao longo do texto.",
        "Fazer um resumo de todas as ideias secund√°rias do desenvolvimento.",
        "Utilizar exclusivamente ora√ß√µes coordenadas assind√©ticas para expressar a opini√£o."
      ],
      "correct": 1
    },
    {
      "text": "Em um texto, a presen√ßa de adv√©rbios como 'infelizmente', 'certamente', 'aparentemente' (elementos de modaliza√ß√£o) serve para:",
      "options": [
        "Garantir a progress√£o com t√≥pico constante.",
        "Revelar a perspectiva, a atitude ou o grau de certeza do locutor sobre o que est√° sendo dito.",
        "Criar um per√≠odo composto por coordena√ß√£o, unindo ora√ß√µes independentes.",
        "Alterar o tempo verbal da voz ativa para a voz passiva."
      ],
      "correct":¬†1
¬†¬†¬†¬†}

    // adicione mais perguntas aqui se quiser
  ];

  /**********************
   * Estado e elementos
   **********************/
  let questions = []; // embaralhadas
  let timePerQuestion = 20;
  let currentIndex = 0;
  let score = 0;
  let wrongs = [];
  let timerInterval = null;
  let remaining = 0;
  let paused = false;

  // elementos DOM
  const startScreen = document.getElementById('startScreen');
  const startBtn = document.getElementById('startBtn');
  const resumeBtn = document.getElementById('resumeBtn');
  const viewRankingBtn = document.getElementById('viewRankingBtn');
  const timePerQuestionSel = document.getElementById('timePerQuestion');

  const quizCard = document.getElementById('quizCard');
  const questionText = document.getElementById('questionText');
  const optionsEl = document.getElementById('options');
  const progressBar = document.getElementById('progressBar');
  const progressText = document.getElementById('progressText');
  const timerBar = document.getElementById('timerBar');
  const timerText = document.getElementById('timerText');
  const scoreMini = document.getElementById('scoreMini');
  const nextBtn = document.getElementById('nextBtn');
  const skipBtn = document.getElementById('skipBtn');
  const quitBtn = document.getElementById('quitBtn');

  const resultCard = document.getElementById('resultCard');
  const resultMsg = document.getElementById('resultMsg');
  const finalScore = document.getElementById('finalScore');
  const totalQ = document.getElementById('totalQ');
  const wrongList = document.getElementById('wrongList');
  const shareBtn = document.getElementById('shareBtn');
  const tryAgainBtn = document.getElementById('tryAgainBtn');
  const backHomeBtn = document.getElementById('backHomeBtn');

  const rankingCard = document.getElementById('rankingCard');
  const rankingList = document.getElementById('rankingList');
  const viewRanking = document.getElementById('viewRankingBtn');
  const clearRankingBtn = document.getElementById('clearRankingBtn');
  const closeRankingBtn = document.getElementById('closeRankingBtn');

  // bot√£o retomar
  const resumeButton = document.getElementById('resumeBtn');

  /**********************
   * Utilit√°rios
   **********************/
  function shuffleArray(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }

  function saveState(){
    const state = { questions, timePerQuestion, currentIndex, score, wrongs, remaining, paused };
    localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
  }

  function loadState(){
    const raw = localStorage.getItem(STORAGE_KEY);
    if(!raw) return null;
    try { return JSON.parse(raw); } catch(e){ return null; }
  }

  function clearState(){
    localStorage.removeItem(STORAGE_KEY);
  }

  function addHistoryEntry(sc){
    const raw = localStorage.getItem(HISTORY_KEY);
    const arr = raw ? JSON.parse(raw) : [];
    arr.unshift({ score: sc, total: questions.length, date: new Date().toISOString() });
    // guarda s√≥ √∫ltimos 20
    localStorage.setItem(HISTORY_KEY, JSON.stringify(arr.slice(0,20)));
  }

  function getHistory(){ const raw = localStorage.getItem(HISTORY_KEY); return raw ? JSON.parse(raw) : []; }

  /**********************
   * Tela Inicial / start
   **********************/
  function showStartScreen(){
    startScreen.classList.remove('hidden');
    quizCard.classList.add('hidden');
    resultCard.classList.add('hidden');
    rankingCard.classList.add('hidden');

    // se existe estado salvo, habilita retomar
    const st = loadState();
    if(st) resumeBtn.classList.remove('hidden'); else resumeBtn.classList.add('hidden');
  }

  // inicia um novo jogo
  function initNewQuiz(){
    timePerQuestion = Number(timePerQuestionSel.value) || 20;
    questions = shuffleArray([...ALL_QUESTIONS]).map(q => ({
      text: q.text,
      // vamos embaralhar op√ß√µes mantendo index correto
      options: shuffleArray(q.options.map((opt, idx) => ({ opt, idx })))
    })).map(q=>{
      // recuperar index da correta
      // find original correct index (we'll map original ALL_QUESTIONS by text)
      const original = ALL_QUESTIONS.find(originalQ => originalQ.text === q.text);
      const correctIdxOriginal = ALL_QUESTIONS.indexOf(original) >=0 ? original.correct : 0;
      // but above mapping is tricky; simpler approach: during map maintain correct value via matching:
      return q;
    });

    // simpler rebuild: ensure correct mapping by rebuilding from ALL_QUESTIONS with shuffle
    questions = shuffleArray(ALL_QUESTIONS).map(item => {
      const shuffledOptions = shuffleArray(item.options.map((opt, idx)=> ({ opt, idx })));
      // determine index in shuffledOptions where idx === item.correct
      const correctShuffledIndex = shuffledOptions.findIndex(o => o.idx === item.correct);
      return {
        text: item.text,
        options: shuffledOptions.map(o=>o.opt),
        correct: correctShuffledIndex
      };
    });

    currentIndex = 0;
    score = 0;
    wrongs = [];
    remaining = timePerQuestion;
    paused = false;
    saveState();
    openQuiz();
  }

  function openQuiz(){
    startScreen.classList.add('hidden');
    quizCard.classList.remove('hidden');
    resultCard.classList.add('hidden');
    rankingCard.classList.add('hidden');
    renderQuestion();
    startTimer();
  }

  /**********************
   * Retomar (carregar estado salvo)
   **********************/
  function tryResume(){
    const st = loadState();
    if(!st) return alert('Nenhum progresso salvo.');
    // recuperar perguntas (j√° v√™m do storage)
    questions = st.questions;
    timePerQuestion = st.timePerQuestion || 20;
    currentIndex = st.currentIndex || 0;
    score = st.score || 0;
    wrongs = st.wrongs || [];
    remaining = st.remaining || timePerQuestion;
    paused = !!st.paused;
    timePerQuestionSel.value = timePerQuestion;
    openQuiz();
    resumeBtn.classList.add('hidden');
  }

  /**********************
   * Render / l√≥gica
   **********************/
  function renderQuestion(){
    // verificar √≠ndice
    if(currentIndex >= questions.length){
      finishQuiz();
      return;
    }

    const q = questions[currentIndex];
    questionText.textContent = q.text;
    optionsEl.innerHTML = '';

    q.options.forEach((opt, i) => {
      const btn = document.createElement('button');
      btn.className = 'option-btn option-button bg-gray-50 border border-transparent rounded-xl px-4 py-3 text-left w-full flex items-center gap-3';
      btn.innerHTML = `<span class="flex-1">${opt}</span><span class="ml-2 opacity-0 transition-opacity" aria-hidden="true"></span>`;
      btn.dataset.index = i;

      // teclado: Enter / Space
      btn.addEventListener('keydown', e => { if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); btn.click(); } });

      btn.addEventListener('click', () => {
        // se j√° desabilitado
        if(btn.classList.contains('disabled')) return;
        handleAnswer(i, btn);
      });

      optionsEl.appendChild(btn);
    });

    updateProgressUI();
    scoreMini.textContent = `Acertos: ${score}`;
    timerText.textContent = `Tempo: ${remaining}s`;
    timerBar.style.width = `${(remaining/timePerQuestion)*100}%`;
    nextBtn.classList.add('hidden');
  }

  function updateProgressUI(){
    const pct = Math.round((currentIndex / questions.length) * 100);
    progressBar.style.width = pct + '%';
    progressText.textContent = `Quest√£o ${Math.min(currentIndex+1, questions.length)} de ${questions.length} (${pct}%)`;
  }

  /**********************
   * Temporizador
   **********************/
  function startTimer(){
    stopTimer();
    timerInterval = setInterval(() => {
      if(paused) return;
      remaining--;
      if(remaining < 0) remaining = 0;
      timerText.textContent = `Tempo: ${remaining}s`;
      timerBar.style.width = `${(remaining/timePerQuestion)*100}%`;
      saveState();

      if(remaining === 0){
        // tempo esgotou = contar como erro e avan√ßar
        markTimeout();
      }
    }, 1000);
  }

  function stopTimer(){
    if(timerInterval) { clearInterval(timerInterval); timerInterval = null; }
  }

  function markTimeout(){
    // revelar resposta correta e marcar erro
    const q = questions[currentIndex];
    const optionsButtons = [...optionsEl.children];
    optionsButtons.forEach((btn, i) => {
      btn.classList.add('disabled');
      if(i === q.correct){
        btn.classList.add('correct');
        const icon = document.createElement('span'); icon.textContent = ' ‚úÖ'; btn.appendChild(icon);
      }
    });
    // registrar como errado
    wrongs.push({ question: q.text, chosen: null, correct: q.options[q.correct] });
    nextBtn.classList.remove('hidden');
    stopTimer();
    saveState();
  }

  /**********************
   * Resposta do usu√°rio
   **********************/
  function handleAnswer(selectedIndex, btn){
    const q = questions[currentIndex];
    const buttons = [...optionsEl.children];
    // desabilita todos
    buttons.forEach(b => { b.classList.add('disabled'); });
    // marca sele√ß√£o
    if(selectedIndex === q.correct){
      btn.classList.add('correct');
      btn.style.background = '#dcfce7';
      score++;
      const tick = document.createElement('span'); tick.textContent = ' ‚úÖ'; tick.className='ml-2'; btn.appendChild(tick);
    } else {
      btn.classList.add('incorrect');
      btn.style.background = '#fee2e2';
      const cross = document.createElement('span'); cross.textContent = ' ‚ùå'; cross.className='ml-2'; btn.appendChild(cross);
      // mostra o correto
      const correctBtn = buttons[q.correct];
      if(correctBtn){
        correctBtn.classList.add('correct');
        const tick = document.createElement('span'); tick.textContent = ' ‚úÖ'; tick.className='ml-2'; correctBtn.appendChild(tick);
      }
      wrongs.push({ question: q.text, chosen: q.options[selectedIndex], correct: q.options[q.correct] });
    }

    // pequeno delay para salvar e permitir ver o feedback
    stopTimer();
    nextBtn.classList.remove('hidden');
    saveState();
  }

  /**********************
   * navegar pr√≥ximas / pular / sair
   **********************/
  nextBtn.addEventListener('click', () => {
    currentIndex++;
    remaining = timePerQuestion;
    saveState();
    if(currentIndex < questions.length){
      renderQuestion();
      startTimer();
    } else {
      finishQuiz();
    }
  });

  skipBtn.addEventListener('click', () => {
    // marcar como pulo = tratado como errada sem chosen
    const q = questions[currentIndex];
    wrongs.push({ question: q.text, chosen: null, correct: q.options[q.correct] });
    currentIndex++;
    remaining = timePerQuestion;
    saveState();
    if(currentIndex < questions.length){
      renderQuestion();
      startTimer();
    } else {
      finishQuiz();
    }
  });

  quitBtn.addEventListener('click', () => {
    if(confirm('Deseja realmente sair e salvar seu progresso para retomar depois?')) {
      saveState();
      showStartScreen();
    }
  });

  /**********************
   * Finalizar quiz / resultados
   **********************/
  function finishQuiz(){
    stopTimer();
    saveState(); // guarda estado final
    // mostrar resultados
    quizCard.classList.add('hidden');
    resultCard.classList.remove('hidden');

    finalScore.textContent = score;
    totalQ.textContent = questions.length;
    // mensagem personalizada
    const pct = Math.round((score / questions.length) * 100);
    let msg = '';
    if(pct === 100) msg = 'Perfeito! Voc√™ domina o assunto. üëè';
    else if(pct >= 80) msg = 'Excelente! Muito bem.';
    else if(pct >= 50) msg = 'Bom trabalho ‚Äî continue praticando.';
    else msg = 'N√£o desanime ‚Äî pr√°tica leva √† melhora!';

    resultMsg.textContent = msg;

    // lista de erradas
    wrongList.innerHTML = '';
    if(wrongs.length){
      const h = document.createElement('h4'); h.className='font-semibold text-red-600'; h.textContent = 'Quest√µes que voc√™ errou:'; wrongList.appendChild(h);
      wrongs.forEach(w => {
        const div = document.createElement('div');
        div.className = 'mt-2 p-3 bg-red-50 rounded';
        div.innerHTML = `<p class="text-sm"><strong>‚ùì ${w.question}</strong></p>
                         <p class="text-xs text-red-600">Sua resposta: ${w.chosen ?? '‚Äî (n√£o respondeu)'}</p>
                         <p class="text-xs text-green-700">Resposta certa: ${w.correct}</p>`;
        wrongList.appendChild(div);
      });
    } else {
      const p = document.createElement('p'); p.className='text-green-700 font-semibold'; p.textContent = 'üéâ Voc√™ n√£o errou nenhuma quest√£o!';
      wrongList.appendChild(p);
    }

    // salvar hist√≥rico e limpar estado salvo
    addHistoryEntry(score);
    clearState();
    renderRanking(); // atualiza ranking na mem√≥ria
  }

  /**********************
   * Compartilhar / ranking
   **********************/
  shareBtn.addEventListener('click', async () => {
    const text = `Fiz o Quiz e acertei ${score} de ${questions.length} perguntas!`;
    if(navigator.share){
      try { await navigator.share({ title:'Meu resultado', text }); }
      catch(e){ alert('Compartilhamento cancelado.'); }
    } else {
      // fallback: link whatsapp
      const url = `https://api.whatsapp.com/send?text=${encodeURIComponent(text)}`;
      window.open(url, '_blank');
    }
  });

  tryAgainBtn.addEventListener('click', () => { initNewQuiz(); });
  backHomeBtn.addEventListener('click', () => { showStartScreen(); });

  viewRankingBtn.addEventListener('click', () => {
    startScreen.classList.add('hidden');
    quizCard.classList.add('hidden');
    resultCard.classList.add('hidden');
    rankingCard.classList.remove('hidden');
    renderRanking();
  });

  closeRankingBtn.addEventListener('click', () => {
    showStartScreen();
  });

  clearRankingBtn.addEventListener('click', () => {
    if(confirm('Limpar todo o hist√≥rico de pontua√ß√µes?')) {
      localStorage.removeItem(HISTORY_KEY);
      renderRanking();
    }
  });

  function renderRanking(){
    const hist = getHistory();
    rankingList.innerHTML = '';
    if(!hist.length){
      rankingList.innerHTML = '<p class="text-gray-500">Nenhuma pontua√ß√£o registrada.</p>';
      return;
    }
    hist.forEach((h, i) => {
      const li = document.createElement('li');
      const date = new Date(h.date);
      li.className = 'py-2 border-b last:border-b-0';
      li.innerHTML = `<strong>#${i+1}</strong> ‚Äî <span class="ml-2 font-semibold">${h.score}/${h.total}</span> <span class="ml-2 text-xs text-gray-500">(${date.toLocaleString()})</span>`;
      rankingList.appendChild(li);
    });
  }
  
  /**********************
   * In√≠cio / eventos de UI
   **********************/
  startBtn.addEventListener('click', () => { initNewQuiz(); });
  resumeBtn.addEventListener('click', tryResume);
  timePerQuestionSel.addEventListener('change', (e) => { /* s√≥ muda na nova sess√£o */ });

  // checar se existe estado salvo para habilitar retomar
  (function init(){
    const st = loadState();
    if(st) resumeBtn.classList.remove('hidden'); else resumeBtn.classList.add('hidden');
    renderRanking();
  })();

  </script>
</body>
</html>





























































